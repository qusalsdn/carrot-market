// prisma init 명령어로 prisma 기본 파일들 생성
// pscale database create (db이름) --region (지역이름) 명령어로 db를 생성할 수 있다.
// pscale conntect (db이름) 명령어는 secure tunnel을 통해 PlanetScale과 연결해준다. 그러면 url을 주는데 이 url을 env 파일에 넣어주면 된다.
// npx prisma db push 명령어를 통해 db를 planetscale에 push 할 수 있다.
// Vitess는 foreugn key constraunt(제약)을 지원하지 않는다.
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  // relationMode는 다른 객체에 연결될 때 그 객체가 존재하길 바란다는 뜻이다.
  relationMode = "prisma"
}

model User {
  // @default(autoincrement())을 추가하면 인덱스가 추가될 때마다 자동으로 증가한다.
  id        Int      @id @default(autoincrement())
  phone     Int?     @unique
  email     String?  @unique
  name      String
  avatar    String?
  // now 함수는 새 유저가 만들어 질 때 그 시점의 날짜를 가져와준다.
  createdAt DateTime @default(now())
  // @updatedAt은 유저가 업데이트 될 때마다 해당 field가 변한다.
  updatedAt DateTime @updatedAt
}
